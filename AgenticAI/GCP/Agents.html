<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Ganesh kinkar Giri" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Agents - AIML documents</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Agents";
        var mkdocs_page_input_path = "AgenticAI/GCP/Agents.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../index.html" class="icon icon-home"> AIML documents
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">AIML</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" >Programing</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Programing/python.html">PYTHON</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Statistic</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" >Descriptive Statistics</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" >Measures of Central Tendency</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Central-Tendency/Mean.html">Mean</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Central-Tendency/Median.html">Median</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Central-Tendency/Mode.html">Mode</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Measures of Position (Relative Standing)</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Position-Relative-Standing/Percentiles.html">Percentiles</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Position-Relative-Standing/Quartiles.html">Quartiles</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Position-Relative-Standing/Deciles.html">Deciles</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Position-Relative-Standing/Z-Score.html">Z-Score</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Shape of the Distribution</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Shape-of-the-Distribution/Skewness.html">Skewness</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Shape-of-the-Distribution/Kurtosis.html">Kurtosis</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Visualization Tools</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Visualization-Tools/Histogram.html">Histogram</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Visualization-Tools/BarChart.html">Bar Chart</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Visualization-Tools/PieChart.html">Pie Chart</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Visualization-Tools/BoxPlot.html">Box Plot</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Visualization-Tools/LinePlot.html">Line Plot</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Visualization-Tools/DotPlot.html">Dot Plot</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Measures of Dispersion (Variability)</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Dispersion/Range.html">Range</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Dispersion/Variance.html">Variance</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Dispersion/StandardDeviation.html">Standard Deviation</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Dispersion/InterquartileRange.html">Interquartile Range(IQR)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/DescriptiveStatistics/Measures-of-Dispersion/CofficientVariation.html">Cofficient of Variation</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Inferential Statistics</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" >Population and Sample</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Population-and-Sample/Population.html">Population</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Population-and-Sample/Sample.html">Sample</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Population-and-Sample/SamplingMethods.html">Sampling Methods</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Estimation</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Estimation/PointEstimation.html">Point Estimation</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Estimation/IntervalEstimation.html">Interval Estimation</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Estimation/MarginError.html">Margin of Error</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Regression and Correlation Analysis</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Regression-and-Correlation-Analysis/LinearRegression.html">Linear Regression</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Regression-and-Correlation-Analysis/LogisticRegression.html">Logistic Regression</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Regression-and-Correlation-Analysis/MultipleRegression.html">Multiple Regression</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Regression-and-Correlation-Analysis/CorrelationCoefficients.html">Correlation Coefficients</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Hypothesis Testing</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Hypothesis-Testing/NullHypothesis.html">Null Hypothesis (H₀)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Hypothesis-Testing/AlternativeHypothesis.html">Alternative Hypothesis (H₁)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Hypothesis-Testing/TestStatistic.html">Test Statistic</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Hypothesis-Testing/pvalue.html">p-value</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Hypothesis-Testing/SignificanceLevel.html">Significance Level (α)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Hypothesis-Testing/TypeIError.html">Type I Error (α)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Hypothesis-Testing/TypeIIError.html">Type II Error (β)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Hypothesis-Testing/PoweroftheTest.html">Power of the Test</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Parametric Tests</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Parametric-Tests/t-test.html">t-test</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Parametric-Tests/z-test.html">z-test</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Parametric-Tests/ANOVA.html">ANOVA</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Parametric-Tests/F-test.html">F-test</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Non-Parametric Tests</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Non-Parametric-Tests/Mann-WhitneyU.html">Mann-Whitney U</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Non-Parametric-Tests/Kruskal-Wallis.html">Kruskal-Wallis</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Non-Parametric-Tests/Wilcoxon.html">Wilcoxon</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Non-Parametric-Tests/Chi-square.html">Chi-square</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Resampling Methods</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Resampling-Methods/Bootstrapping.html">Bootstrapping</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Resampling-Methods/Jackknife.html">Jackknife</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Analysis of Variance (ANOVA)</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/ANOVA/One-way-ANOVA.html">One-way ANOVA</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/ANOVA/Two-way-ANOVA.html">Two-way ANOVA</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/ANOVA/Post-hoc-Tests.html">Post-hoc Tests</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Probability Theory</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Probability-Theory/ProbabilityDistributions.html">Probability Distributions</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Probability-Theory/CentralLimitTheorem.html">Central Limit Theorem</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../Statistic/InferentialStatistics/Probability-Theory/BayesianInference.html">Bayesian Inference</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Time Series</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Trend.html">Trend</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Seasonality.html">Seasonality</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Cyclic.html">Cyclic</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Noise.html">Irregular/Noise</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Stationarity.html">Stationarity</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Non-stationary.html">Non-stationary</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Autocorrelation.html">Autocorrelation</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Lag.html">Lag</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/MovingAverages.html">Moving Averages</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Holt-Winters.html">Holt-Winters Method</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Additive.html">Additive</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Multiplicative.html">Multiplicative</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/AR.html">AR (Auto Regression)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/ARIMA.html">ARIMA</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Arimax.html">Arimax</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Sarimax.html">Sarimax</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Smoothing.html">Smoothing</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/AutomatedForecasting.html">Automated Forecasting</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/AutomatedTimeSeries.html">Automated Time Series</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../Statistic/TimeSeries/Multivariate.html">Uni, Bi and Multivariate</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Statistic/metrics.html">Metrics Evaluation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Statistic/timeseries.html">Time Series Old</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Statistic/statistic-details.html">Statistic Details</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Data manipulation and analysis</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Data-manipulation-and-analysis/data-manipulation-analysis.html">PANDAS</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Data Processing</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Data-processing/sql.html">Basic SQL</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Data-processing/sql-datascience.html">Using SQL for Data Science</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Data-processing/unstructured-data.html">Unstructured Data</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Data-processing/exploratory-data-analysis.html">Exploratory Data Analysis(EDA)</a>
                </li>
                <li class="toctree-l2"><a class="" href="../../Data-processing/building-ml-models-on-text-data.md">Building ML Models on Text Data</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Databases</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Databases/PostgreSQL.html">PostgreSQL</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Databases/MySQL.html">MySQL</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../Databases/MongoDB.html">MongoDB</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Machine Learning</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../MachineLearning/Overview.html">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Supervised Learning</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/Overview.html">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/Regression.html">Regression</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/Classification.html">Classification</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/CrossValidation.html">Cross Validation</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/HyperparameterTuning.html">Hyperparameter Tuning</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/TuningDecisionThreshold.html">Tuning decision threshold</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Regression Models</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/RegressionModels/SimpleLinearRegression.html">Simple Linear Regression</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/RegressionModels/MultipleLinearRegression.html">Multiple Linear Regression</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/RegressionModels/PolynomialRegression.html">Polynomial Regression</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/RegressionModels/RidgeLassoRegression.html">Ridge & Lasso Regression</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/RegressionModels/SupportVectorRegression.html">Support Vector Regression (SVR)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/RegressionModels/DecisionTreeRegression.html">Decision Tree Regression</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/RegressionModels/RandomForestRegression.html">Random Forest Regression</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Linear Classification Models</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/LinearClassificationModels/LogisticRegression.html">Logistic Regression</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/LinearClassificationModels/SupportVectorMachines.html">Support Vector Machines</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/LinearClassificationModels/SinglelayerPerceptron.html">Single-layer Perceptron</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/LinearClassificationModels/StochasticGradientDescent.html">Stochastic Gradient Descent (SGD)</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Non-linear Classification Models</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/NonlinearClassificationModels/DecisionTreeClassification.html">Decision Tree Classification</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/NonlinearClassificationModels/KNearestNeighbours.html">K-Nearest Neighbours</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/NonlinearClassificationModels/NaiveBayes.html">Naive Bayes</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/NonlinearClassificationModels/RandomForests.html">Random Forests</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/NonlinearClassificationModels/AdaBoost.html">AdaBoost</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/NonlinearClassificationModels/BaggingClassifier.html">Bagging Classifier</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/NonlinearClassificationModels/Ensemblelearningclassifiers.html">Ensemble learning classifiers</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../MachineLearning/SupervisedLearning/NonlinearClassificationModels/KernelSVM.html">Kernel SVM</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Unsupervised Learning</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../MachineLearning/UnsupervisedLearning/overview.html">Overview</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../MachineLearning/UnsupervisedLearning/Clustering.html">Clustering</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../MachineLearning/UnsupervisedLearning/Pca.html">Principal Component Analysis(PCA)</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Reinforcement Learning</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../MachineLearning/ReinforcementLearning/ReinforcementLearning.html">Overview</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Linear Algebra</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../LinearAlgebra/Overview.html">Overview</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Deep Learning</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../DeepLearning/Overview.html">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../DeepLearning/Vanishing.html">Vanishing and Exploding Gradients Problems</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Components of Neural Networks</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Components/LayersNeuralNetworks.html">Layers in Neural Networks</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Components/WeightsBiases.html">Weights and Biases</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Components/ForwardPropagation.html">Forward Propagation</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Components/ActivationFunctions.html">Activation Functions</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Components/LossFunctions.html">Loss Functions</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Components/Backpropagation.html">Backpropagation</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Components/LearningRate.html">Learning Rate</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Optimization Algorithm</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/OptimizationAlgorithm/GradientDescent.html">Gradient Descent</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/OptimizationAlgorithm/SGD.html">Stochastic Gradient Descent (SGD)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/OptimizationAlgorithm/Adam.html">Adam (Adaptive Moment Estimation)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/OptimizationAlgorithm/BatchNormalization.html">Batch Normalization</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/OptimizationAlgorithm/Mini-batch-GD.html">Mini-batch Gradient Descent</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/OptimizationAlgorithm/Momentum-based-GO.html">Momentum-based Gradient Optimizer</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/OptimizationAlgorithm/AdagradOptimizer.html">Adagrad Optimizer</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/OptimizationAlgorithm/RMSPropOptimizer.html">RMSProp Optimizer</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Models</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Models/FNN.html">Feedforward Neural Network (FNN)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" >Recurrent Neural Network (RNN)</a>
    <ul>
                <li class="toctree-l4"><a class="reference internal" href="../../DeepLearning/Models/RNN.html">Recurrent Neural Network (RNN)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../DeepLearning/Models/LSTM.html">LSTM (Long Short-Term Memory)</a>
                </li>
                <li class="toctree-l4"><a class="reference internal" href="../../DeepLearning/Models/GRU.html">GRU (Gated Recurrent Unit)</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Models/CNN.html">Convolutional Neural Network (CNN)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Models/RBFN.html">Radial Basis Function Network (RBFN)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Models/ComputerVision.html">Computer Vision</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Models/GANs.html">Generative Adversarial Networks (GANs)</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Models/Transformer.html">Transformer Networks</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Models/Autoencoders.html">Autoencoders</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../DeepLearning/Models/SOM.html">Self-Organizing Maps (SOM)</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Natural Language Processing(NLP)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../NLP/overview.html">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../NLP/nlpdetails.html">NLP Details</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Retrieval-Augmented Generation(RAG)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../RAG/rag.html">RAG</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >AI agents</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../AIagents/aiagents.html">AI agents</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" >Agentic AI</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../general.html">general</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../overview.html">Overview</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../crewai.html">crewai</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../LangGraph.html">LangGraph</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../AutoGen.html">AutoGen</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../aws.html">AWS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../azure.html">AZURE</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" >Agent Development Kit</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="adk.html">ADK</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="#">Agents</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="Tools.html">Tools</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="a2a.html">Tools</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >MCPModel Context Protocol (MCP)</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../MCP/mcp.html">MCP</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Models Details information</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Models/Ollama.html">Ollama</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Note Book</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../Notebook/allnotebook.html">All Notebook</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">AIML documents</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">AIML</li>
          <li class="breadcrumb-item">Agentic AI</li>
          <li class="breadcrumb-item">Agent Development Kit</li>
      <li class="breadcrumb-item active">Agents</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h3 style="color:red;">✅ Agents</h3>

<h3 style="color:blue;">📌 What is Agents?</h3>

<p>In the Agent Development Kit (ADK), an Agent is a self-contained execution unit designed to act autonomously to achieve specific goals. Agents can perform tasks, interact with users, utilize external tools, and coordinate with other agents.</p>
<p>The foundation for all agents in ADK is the BaseAgent class. It serves as the fundamental blueprint. To create functional agents, you typically extend BaseAgent in one of three main ways, catering to different needs – from intelligent reasoning to structured process control.</p>
<p><img alt="alt text" src="../image/adk1.png" /></p>
<h3 style="color:blue;">📌 Core Agent Categories</h3>

<p>ADK provides distinct agent categories to build sophisticated applications:</p>
<h3 style="color:red;">✅ LLM Agents (LlmAgent, Agent):</h3>

<p>These agents utilize Large Language Models (LLMs) as their core engine to understand natural language, reason, plan, generate responses, and dynamically decide how to proceed or which tools to use, making them ideal for flexible, language-centric tasks.</p>
<h3 style="color:red;">✅ Workflow Agents (SequentialAgent, ParallelAgent, LoopAgent):</h3>

<p>These specialized agents control the execution flow of other agents in predefined, deterministic patterns (sequence, parallel, or loop) without using an LLM for the flow control itself, perfect for structured processes needing predictable execution.</p>
<h3 style="color:red;">✅ Custom Agents:</h3>
<p>Created by extending BaseAgent directly, these agents allow you to implement unique operational logic, specific control flows, or specialized integrations not covered by the standard types, catering to highly tailored application requirements.</p>
<h3 style="color:blue;">📌 Choosing the Right Agent Type</h3>

<table>
<thead>
<tr>
<th>Feature</th>
<th>LLM Agent (<code>LlmAgent</code>)</th>
<th>Workflow Agent</th>
<th>Custom Agent (<code>BaseAgent</code> subclass)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Primary Function</strong></td>
<td>Reasoning, Generation, Tool Use</td>
<td>Controlling Agent Execution Flow</td>
<td>Implementing Unique Logic/Integrations</td>
</tr>
<tr>
<td><strong>Core Engine</strong></td>
<td>Large Language Model (LLM)</td>
<td>Predefined Logic (Sequence, Parallel, Loop)</td>
<td>Custom Code</td>
</tr>
<tr>
<td><strong>Determinism</strong></td>
<td>Non-deterministic (Flexible)</td>
<td>Deterministic (Predictable)</td>
<td>Can be either, based on implementation</td>
</tr>
<tr>
<td><strong>Primary Use</strong></td>
<td>Language tasks, Dynamic decisions</td>
<td>Structured processes, Orchestration</td>
<td>Tailored requirements, Specific workflows</td>
</tr>
</tbody>
</table>
<h3 style="color:blue;">📌 Agents Working Together: Multi-Agent Systems</h3>

<p>While each agent type serves a distinct purpose, the true power often comes from combining them. Complex applications frequently employ multi-agent architectures where:</p>
<ul>
<li>
<p><strong>LLM Agents</strong> handle intelligent, language-based task execution.</p>
</li>
<li>
<p><strong>Workflow Agents</strong> manage the overall process flow using standard patterns.</p>
</li>
<li>
<p><strong>Custom Agents</strong> provide specialized capabilities or rules needed for unique integrations.</p>
</li>
</ul>
<h3 style="color:blue;">📌 LLM Agents:</h3>

<p>The <code>LlmAgent</code> (often aliased simply as Agent) is a core component in ADK, acting as the "thinking" part of your application. It leverages the power of a Large Language Model (LLM) for reasoning, understanding natural language, making decisions, generating responses, and interacting with tools.</p>
<p>Unlike deterministic <code>Workflow Agents</code> that follow predefined execution paths, LlmAgent behavior is non-deterministic. It uses the LLM to interpret instructions and context, deciding dynamically how to proceed, which tools to use (if any), or whether to transfer control to another agent.</p>
<p>Building an effective <code>LlmAgent</code> involves defining its identity, clearly guiding its behavior through instructions, and equipping it with the necessary tools and capabilities.</p>
<h3 style="color:blue;">📌 Defining the Agent's Identity and Purpose:</h3>

<p>First, you need to establish what the agent is and what it's for.</p>
<ul>
<li>
<p><strong>name</strong> <code>(Required):</code> Every agent needs a unique string identifier. This name is crucial for internal operations, especially in multi-agent systems where agents need to refer to or delegate tasks to each other. Choose a descriptive name that reflects the agent's function (e.g., <code>customer_support_router</code>, <code>billing_inquiry_agent</code>). Avoid reserved names like <code>user</code>.</p>
</li>
<li>
<p><strong>description</strong> <code>(Optional, Recommended for Multi-Agent):</code> Provide a concise summary of the agent's capabilities. This description is primarily used by other LLM agents to determine if they should route a task to this agent. Make it specific enough to differentiate it from peers (e.g., "Handles inquiries about current billing statements," not just "Billing agent").</p>
</li>
<li>
<p><strong>model</strong> <code>(Required):</code> Specify the underlying LLM that will power this agent's reasoning. This is a string identifier like <code>"gemini-2.0-flash"</code>. The choice of model impacts the agent's capabilities, cost, and performance. See the Models page for available options and considerations.</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1"># Example: Defining the basic identity</span>
<span class="n">capital_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LlmAgent</span><span class="p">(</span>
<span class="w">    </span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;capital_agent&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;Answers user questions about the capital city of a given country.&quot;</span>
<span class="w">    </span><span class="c1"># instruction and tools will be added next</span>
<span class="p">)</span>
</code></pre></div>

<h3 style="color:blue;">📌 Guiding the Agent: Instructions (instruction)</h3>

<p>The <code>instruction</code> parameter is arguably the most critical for shaping an <code>LlmAgent's</code> behavior. It's a string (or a function returning a string) that tells the agent:</p>
<ul>
<li>
<p>Its core task or goal.</p>
</li>
<li>
<p>Its personality or persona (e.g., "You are a helpful assistant," "You are a witty pirate").</p>
</li>
<li>
<p>Constraints on its behavior (e.g., "Only answer questions about X," "Never reveal Y").</p>
</li>
<li>
<p>How and when to use its <code>tools</code>. You should explain the purpose of each tool and the circumstances under which it should be called, supplementing any descriptions within the tool itself.</p>
</li>
<li>
<p>The desired format for its output (e.g., "Respond in JSON," "Provide a bulleted list").</p>
</li>
</ul>
<h3 style="color:blue;">📌 Tips for Effective Instructions:</h3>

<ul>
<li>
<p><strong>Be Clear and Specific:</strong> Avoid ambiguity. Clearly state the desired actions and outcomes.</p>
</li>
<li>
<p><strong>Use Markdown:</strong> Improve readability for complex instructions using headings, lists, etc.</p>
</li>
<li>
<p><strong>Provide Examples (Few-Shot):</strong> For complex tasks or specific output formats, include examples directly in the instruction.</p>
</li>
<li>
<p><strong>Guide Tool Use:</strong> Don't just list tools; explain when and why the agent should use them.</p>
</li>
</ul>
<h3 style="color:blue;">📌 State:</h3>

<ul>
<li>
<p>The instruction is a string template, you can use the {var} syntax to insert dynamic values into the instruction.</p>
</li>
<li>
<p><code>{var}</code> is used to insert the value of the state variable named var.</p>
</li>
<li>
<p><code>{artifact.var}</code> is used to insert the text content of the artifact named var.</p>
</li>
<li>
<p>If the state variable or artifact does not exist, the agent will raise an error. If you want to ignore the error, you can append a <code>?</code> to the variable name as in <code>{var?}</code>.</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1"># Example: Adding instructions</span>
<span class="n">capital_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LlmAgent</span><span class="p">(</span>
<span class="w">    </span><span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="k">name</span><span class="o">=</span><span class="s2">&quot;capital_agent&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="k">description</span><span class="o">=</span><span class="s2">&quot;Answers user questions about the capital city of a given country.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">instruction</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">&quot;&quot;</span><span class="s2">You are an agent that provides the capital city of a country.</span>
<span class="s2">When a user asks for the capital of a country:</span>
<span class="s2">1. Identify the country name from the user&#39;s query.</span>
<span class="s2">2. Use the `get_capital_city` tool to find the capital.</span>
<span class="s2">3. Respond clearly to the user, stating the capital city.</span>
<span class="s2">Example Query: &quot;</span><span class="n">What</span><span class="s1">&#39;s the capital of {country}?&quot;</span>
<span class="s1">Example Response: &quot;The capital of France is Paris.&quot;</span>
<span class="s1">&quot;&quot;&quot;,</span>
<span class="s1">    # tools will be added next</span>
<span class="s1">)</span>
</code></pre></div>

<p>Note: For instructions that apply to all agents in a system, consider using global_instruction on the root agent.</p>
<h3 style="color:blue;">📌 Equipping the Agent: Tools (tools)</h3>

<p>Tools give your <code>LlmAgent</code> capabilities beyond the LLM's built-in knowledge or reasoning. They allow the agent to interact with the outside world, perform calculations, fetch real-time data, or execute specific actions.</p>
<ul>
<li>
<p><strong>tools</strong> <code>(Optional)</code>: Provide a list of tools the agent can use. Each item in the list can be:</p>
<ul>
<li>
<p>A native function or method (wrapped as a FunctionTool). Python ADK automatically wraps the native function into a FuntionTool whereas, you must explicitly wrap your Java methods using FunctionTool.create(...)</p>
</li>
<li>
<p>An instance of a class inheriting from <code>BaseTool</code>.</p>
</li>
<li>
<p>An instance of another agent AgentTool, enabling agent-to-agent delegation.</p>
</li>
</ul>
</li>
</ul>
<p>The LLM uses the function/tool names, descriptions (from docstrings or the description field), and parameter schemas to decide which tool to call based on the conversation and its instructions.</p>
<div class="codehilite"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="n">Define</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">tool</span><span class="w"> </span><span class="k">function</span>
<span class="n">def</span><span class="w"> </span><span class="n">get_capital_city</span><span class="p">(</span><span class="nl">country</span><span class="p">:</span><span class="w"> </span><span class="nf">str</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nf">str</span><span class="err">:</span>
<span class="w">  </span><span class="ss">&quot;&quot;&quot;Retrieves the capital city for a given country.&quot;&quot;&quot;</span>
<span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="nf">Replace</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">logic</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.,</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="k">call</span><span class="p">,</span><span class="w"> </span><span class="k">database</span><span class="w"> </span><span class="n">lookup</span><span class="p">)</span>
<span class="w">  </span><span class="n">capitals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{</span><span class="ss">&quot;france&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Paris&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;japan&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Tokyo&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;canada&quot;</span><span class="err">:</span><span class="w"> </span><span class="ss">&quot;Ottawa&quot;</span><span class="err">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">capitals</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="n">country</span><span class="p">.</span><span class="nf">lower</span><span class="p">(),</span><span class="w"> </span><span class="n">f</span><span class="ss">&quot;Sorry, I don&#39;t know the capital of {country}.&quot;</span><span class="p">)</span>

<span class="err">#</span><span class="w"> </span><span class="k">Add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">tool</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">agent</span>
<span class="n">capital_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LlmAgent</span><span class="p">(</span>
<span class="w">    </span><span class="n">model</span><span class="o">=</span><span class="ss">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">name</span><span class="o">=</span><span class="ss">&quot;capital_agent&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">description</span><span class="o">=</span><span class="ss">&quot;Answers user questions about the capital city of a given country.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">instruction</span><span class="o">=</span><span class="ss">&quot;&quot;&quot;You are an agent that provides the capital city of a country... (previous instruction text)&quot;&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">tools</span><span class="o">=[</span><span class="n">get_capital_city</span><span class="o">]</span><span class="w"> </span><span class="err">#</span><span class="w"> </span><span class="n">Provide</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="n">directly</span>
<span class="p">)</span>
</code></pre></div>

<h3 style="color:blue;">📌 Advanced Configuration & Control</h3>

<p>Beyond the core parameters, LlmAgent offers several options for finer control:</p>
<p>Configuring LLM Generation (generate_content_config)</p>
<p>You can adjust how the underlying LLM generates responses using <code>generate_content_config</code>.</p>
<ul>
<li><strong>generate_content_config</strong> <code>(Optional)</code>: Pass an instance of <code>google.genai.types.GenerateContentConfig</code> to control parameters like <code>temperature</code> (randomness), <code>max_output_tokens</code> (response length), <code>top_p, top_k,</code> and safety settings.</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">agent</span> <span class="o">=</span> <span class="n">LlmAgent</span><span class="p">(</span>
    <span class="c1"># ... other params</span>
    <span class="n">generate_content_config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">GenerateContentConfig</span><span class="p">(</span>
        <span class="n">temperature</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="c1"># More deterministic output</span>
        <span class="n">max_output_tokens</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>
        <span class="n">safety_settings</span><span class="o">=</span><span class="p">[</span>
            <span class="n">types</span><span class="o">.</span><span class="n">SafetySetting</span><span class="p">(</span>
                <span class="n">category</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">HarmCategory</span><span class="o">.</span><span class="n">HARM_CATEGORY_DANGEROUS_CONTENT</span><span class="p">,</span>
                <span class="n">threshold</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">HarmBlockThreshold</span><span class="o">.</span><span class="n">BLOCK_LOW_AND_ABOVE</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre></div>

<p><strong>Structuring Data</strong> <code>(input_schema, output_schema, output_key)</code></p>
<p>For scenarios requiring structured data exchange with an LLM Agent, the ADK provides mechanisms to define expected input and desired output formats using schema definitions.</p>
<ul>
<li>
<p><strong>input_schema (Optional):</strong> Define a schema representing the expected input structure. If set, the user message content passed to this agent must be a JSON string conforming to this schema. Your instructions should guide the user or preceding agent accordingly.</p>
</li>
<li>
<p><strong>output_schema (Optional):</strong> Define a schema representing the desired output structure. If set, the agent's final response must be a JSON string conforming to this schema.</p>
</li>
<li>
<p><strong>output_key (Optional):</strong> Provide a string key. If set, the text content of the agent's final response will be automatically saved to the session's state dictionary under this key. This is useful for passing results between agents or steps in a workflow.</p>
<ul>
<li>In Python, this might look like: <code>session.state[output_key] = agent_response_text</code></li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CapitalOutput</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">capital</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s2">&quot;The capital of the country.&quot;</span><span class="p">)</span>

<span class="n">structured_capital_agent</span> <span class="o">=</span> <span class="n">LlmAgent</span><span class="p">(</span>
    <span class="c1"># ... name, model, description</span>
    <span class="n">instruction</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;You are a Capital Information Agent. Given a country, respond ONLY with a JSON object containing the capital. Format: {&quot;capital&quot;: &quot;capital_name&quot;}&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">output_schema</span><span class="o">=</span><span class="n">CapitalOutput</span><span class="p">,</span> <span class="c1"># Enforce JSON output</span>
    <span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;found_capital&quot;</span>  <span class="c1"># Store result in state[&#39;found_capital&#39;]</span>
    <span class="c1"># Cannot use tools=[get_capital_city] effectively here</span>
<span class="p">)</span>
</code></pre></div>

<h3 style="color:blue;">📌 Managing Context (include_contents)</h3>

<p>Control whether the agent receives the prior conversation history.</p>
<ul>
<li>
<p><strong>include_contents (Optional, Default: 'default'):</strong> Determines if the contents (history) are sent to the LLM.</p>
<ul>
<li>
<p><strong>'default':</strong> The agent receives the relevant conversation history.</p>
</li>
<li>
<p><strong>'none':</strong> The agent receives no prior contents. It operates based solely on its current instruction and any input provided in the current turn (useful for stateless tasks or enforcing specific contexts).</p>
</li>
</ul>
</li>
</ul>
<div class="codehilite"><pre><span></span><code>stateless_agent = LlmAgent(
    # ... other params
    include_contents=&#39;none&#39;
)
</code></pre></div>

<h3 style="color:blue;">📌 Planner</h3>

<p><strong>planner (Optional):</strong> Assign a <code>BasePlanner</code> instance to enable multi-step reasoning and planning before execution. There are two main planners:</p>
<ul>
<li><strong>BuiltInPlanner:</strong> Leverages the model's built-in planning capabilities (e.g., Gemini's thinking feature)
     Here, the thinking_budget parameter guides the model on the number of thinking tokens to use when generating a response. The include_thoughts parameter controls whether the model should include its raw thoughts and internal reasoning process in the response.</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">google.adk</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.planners</span><span class="w"> </span><span class="kn">import</span> <span class="n">BuiltInPlanner</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>

<span class="n">my_agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.5-flash&quot;</span><span class="p">,</span>
    <span class="n">planner</span><span class="o">=</span><span class="n">BuiltInPlanner</span><span class="p">(</span>
        <span class="n">thinking_config</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">ThinkingConfig</span><span class="p">(</span>
            <span class="n">include_thoughts</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">thinking_budget</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="c1"># ... your tools here</span>
<span class="p">)</span>
</code></pre></div>

<ul>
<li><strong>PlanReActPlanner:</strong> This planner instructs the model to follow a specific structure in its output: first create a plan, then execute actions (like calling tools), and provide reasoning for its steps. It's particularly useful for models that don't have a built-in "thinking" feature.</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">google.adk</span><span class="w"> </span><span class="kn">import</span> <span class="n">Agent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.planners</span><span class="w"> </span><span class="kn">import</span> <span class="n">PlanReActPlanner</span>

<span class="n">my_agent</span> <span class="o">=</span> <span class="n">Agent</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.0-flash&quot;</span><span class="p">,</span>
    <span class="n">planner</span><span class="o">=</span><span class="n">PlanReActPlanner</span><span class="p">(),</span>
    <span class="c1"># ... your tools here</span>
<span class="p">)</span>
</code></pre></div>

<p>The agent's response will follow a structured format:</p>
<div class="codehilite"><pre><span></span><code><span class="o">[</span><span class="n">user</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="n">ai</span><span class="w"> </span><span class="n">news</span>
<span class="o">[</span><span class="n">google_search_agent</span><span class="o">]</span><span class="err">:</span><span class="w"> </span><span class="cm">/*PLANNING*/</span>
<span class="mf">1.</span><span class="w"> </span><span class="n">Perform</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Google</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="ss">&quot;latest AI news&quot;</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">get</span><span class="w"> </span><span class="k">current</span><span class="w"> </span><span class="n">updates</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">headlines</span><span class="w"> </span><span class="n">related</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">artificial</span><span class="w"> </span><span class="n">intelligence</span><span class="p">.</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">Synthesize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">AI</span><span class="w"> </span><span class="n">news</span><span class="p">.</span>

<span class="cm">/*ACTION*/</span>
<span class="cm">/*REASONING*/</span>
<span class="n">The</span><span class="w"> </span><span class="k">search</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">comprehensive</span><span class="w"> </span><span class="n">overview</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">AI</span><span class="w"> </span><span class="n">news</span><span class="p">,</span><span class="w"> </span><span class="n">covering</span><span class="w"> </span><span class="n">various</span><span class="w"> </span><span class="n">aspects</span><span class="w"> </span><span class="ow">like</span><span class="w"> </span><span class="n">company</span><span class="w"> </span><span class="n">developments</span><span class="p">,</span><span class="w"> </span><span class="n">research</span><span class="w"> </span><span class="n">breakthroughs</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">applications</span><span class="p">.</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">enough</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">answer</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">user</span><span class="s1">&#39;s request.</span>

<span class="s1">/*FINAL_ANSWER*/</span>
<span class="s1">Here&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">recent</span><span class="w"> </span><span class="n">AI</span><span class="w"> </span><span class="nl">news</span><span class="p">:</span>
<span class="p">....</span>
</code></pre></div>

<h3 style="color:blue;">📌 Code Execution</h3>

<ul>
<li><strong>code_executor (Optional):</strong> Provide a BaseCodeExecutor instance to allow the agent to execute code blocks found in the LLM's response.</li>
</ul>
<p>Example for using built-in-planner:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">dotenv</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_dotenv</span>


<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.agents.llm_agent</span><span class="w"> </span><span class="kn">import</span> <span class="n">LlmAgent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.runners</span><span class="w"> </span><span class="kn">import</span> <span class="n">Runner</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.sessions</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemorySessionService</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.artifacts.in_memory_artifact_service</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemoryArtifactService</span> <span class="c1"># Optional</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.planners</span><span class="w"> </span><span class="kn">import</span> <span class="n">BasePlanner</span><span class="p">,</span> <span class="n">BuiltInPlanner</span><span class="p">,</span> <span class="n">PlanReActPlanner</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">LlmRequest</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">ThinkingConfig</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">GenerateContentConfig</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">zoneinfo</span><span class="w"> </span><span class="kn">import</span> <span class="n">ZoneInfo</span>

<span class="n">APP_NAME</span> <span class="o">=</span> <span class="s2">&quot;weather_app&quot;</span>
<span class="n">USER_ID</span> <span class="o">=</span> <span class="s2">&quot;1234&quot;</span>
<span class="n">SESSION_ID</span> <span class="o">=</span> <span class="s2">&quot;session1234&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_weather</span><span class="p">(</span><span class="n">city</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves the current weather report for a specified city.</span>

<span class="sd">    Args:</span>
<span class="sd">        city (str): The name of the city for which to retrieve the weather report.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: status and result or error msg.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">city</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;new york&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
            <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="s2">&quot;The weather in New York is sunny with a temperature of 25 degrees&quot;</span>
                <span class="s2">&quot; Celsius (77 degrees Fahrenheit).&quot;</span>
            <span class="p">),</span>
        <span class="p">}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
            <span class="s2">&quot;error_message&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Weather information for &#39;</span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">&#39; is not available.&quot;</span><span class="p">,</span>
        <span class="p">}</span>


<span class="k">def</span><span class="w"> </span><span class="nf">get_current_time</span><span class="p">(</span><span class="n">city</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the current time in a specified city.</span>

<span class="sd">    Args:</span>
<span class="sd">        city (str): The name of the city for which to retrieve the current time.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: status and result or error msg.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">city</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;new york&quot;</span><span class="p">:</span>
        <span class="n">tz_identifier</span> <span class="o">=</span> <span class="s2">&quot;America/New_York&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span><span class="p">,</span>
            <span class="s2">&quot;error_message&quot;</span><span class="p">:</span> <span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Sorry, I don&#39;t have timezone information for </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">),</span>
        <span class="p">}</span>

    <span class="n">tz</span> <span class="o">=</span> <span class="n">ZoneInfo</span><span class="p">(</span><span class="n">tz_identifier</span><span class="p">)</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz</span><span class="p">)</span>
    <span class="n">report</span> <span class="o">=</span> <span class="p">(</span>
        <span class="sa">f</span><span class="s1">&#39;The current time in </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s1"> is </span><span class="si">{</span><span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S %Z%z&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span> <span class="s2">&quot;report&quot;</span><span class="p">:</span> <span class="n">report</span><span class="p">}</span>

<span class="c1"># Step 1: Create a ThinkingConfig</span>
<span class="n">thinking_config</span> <span class="o">=</span> <span class="n">ThinkingConfig</span><span class="p">(</span>
    <span class="n">include_thoughts</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>   <span class="c1"># Ask the model to include its thoughts in the response</span>
    <span class="n">thinking_budget</span><span class="o">=</span><span class="mi">256</span>      <span class="c1"># Limit the &#39;thinking&#39; to 256 tokens (adjust as needed)</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ThinkingConfig:&quot;</span><span class="p">,</span> <span class="n">thinking_config</span><span class="p">)</span>

<span class="c1"># Step 2: Instantiate BuiltInPlanner</span>
<span class="n">planner</span> <span class="o">=</span> <span class="n">BuiltInPlanner</span><span class="p">(</span>
    <span class="n">thinking_config</span><span class="o">=</span><span class="n">thinking_config</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;BuiltInPlanner created.&quot;</span><span class="p">)</span>

<span class="c1"># Step 3: Wrap the planner in an LlmAgent</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">LlmAgent</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gemini-2.5-pro-preview-03-25&quot;</span><span class="p">,</span>  <span class="c1"># Set your model name</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;weather_and_time_agent&quot;</span><span class="p">,</span>
    <span class="n">instruction</span><span class="o">=</span><span class="s2">&quot;You are an agent that returns time and weather&quot;</span><span class="p">,</span>
    <span class="n">planner</span><span class="o">=</span><span class="n">planner</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">get_weather</span><span class="p">,</span> <span class="n">get_current_time</span><span class="p">]</span>
<span class="p">)</span>

<span class="c1"># Session and Runner</span>
<span class="n">session_service</span> <span class="o">=</span> <span class="n">InMemorySessionService</span><span class="p">()</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">session_service</span><span class="o">.</span><span class="n">create_session</span><span class="p">(</span><span class="n">app_name</span><span class="o">=</span><span class="n">APP_NAME</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">USER_ID</span><span class="p">,</span> <span class="n">session_id</span><span class="o">=</span><span class="n">SESSION_ID</span><span class="p">)</span>
<span class="n">runner</span> <span class="o">=</span> <span class="n">Runner</span><span class="p">(</span><span class="n">agent</span><span class="o">=</span><span class="n">agent</span><span class="p">,</span> <span class="n">app_name</span><span class="o">=</span><span class="n">APP_NAME</span><span class="p">,</span> <span class="n">session_service</span><span class="o">=</span><span class="n">session_service</span><span class="p">)</span>

<span class="c1"># Agent Interaction</span>
<span class="k">def</span><span class="w"> </span><span class="nf">call_agent</span><span class="p">(</span><span class="n">query</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Content</span><span class="p">(</span><span class="n">role</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="n">parts</span><span class="o">=</span><span class="p">[</span><span class="n">types</span><span class="o">.</span><span class="n">Part</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">query</span><span class="p">)])</span>
    <span class="n">events</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="n">USER_ID</span><span class="p">,</span> <span class="n">session_id</span><span class="o">=</span><span class="n">SESSION_ID</span><span class="p">,</span> <span class="n">new_message</span><span class="o">=</span><span class="n">content</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">DEBUG EVENT: </span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">is_final_response</span><span class="p">()</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
            <span class="n">final_answer</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">🟢 FINAL ANSWER</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">final_answer</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">call_agent</span><span class="p">(</span><span class="s2">&quot;If it&#39;s raining in New York right now, what is the current temperature?&quot;</span><span class="p">)</span>
</code></pre></div>

<h1 id="workflow-agents">Workflow Agents<a class="headerlink" href="#workflow-agents" title="Permanent link">#</a></h1>
<h3 style="color:blue;">📌 workflow agents</h3>

<p>Workflow agents - <strong>specialized agents that control the execution flow of its sub-agents</strong>.</p>
<p>Workflow agents are specialized components in ADK designed purely for <strong>orchestrating the execution flow of sub-agents</strong>. Their primary role is to manage how and when other agents run, defining the control flow of a process.</p>
<p>Unlike LLM Agents, which use Large Language Models for dynamic reasoning and decision-making, Workflow Agents operate based on <strong>predefined logic</strong>. They determine the execution sequence according to their type (e.g., sequential, parallel, loop) without consulting an LLM for the orchestration itself. This results in <strong>deterministic and predictable execution patterns</strong>.</p>
<p>ADK provides three core workflow agent types, each implementing a distinct execution pattern:</p>
<ol>
<li>
<p><strong>Sequential Agents</strong></p>
</li>
<li>
<p><strong>Loop Agents</strong></p>
</li>
<li>
<p><strong>Parallel Agents</strong></p>
</li>
</ol>
<h3 style="color:blue;">📌 Why Use Workflow Agents?</h3>

<p>Workflow agents are essential when you need explicit control over how a series of tasks or agents are executed. They provide:</p>
<ul>
<li>
<p><strong>Predictability:</strong> The flow of execution is guaranteed based on the agent type and configuration.</p>
</li>
<li>
<p><strong>Reliability:</strong> Ensures tasks run in the required order or pattern consistently.</p>
</li>
<li>
<p><strong>Structure:</strong> Allows you to build complex processes by composing agents within clear control structures.</p>
</li>
</ul>
<h3 style="color:blue;">📌 Sequential agents</h3>

<p>The SequentialAgent is a workflow agent that executes its sub-agents in the order they are specified in the list.</p>
<p><strong>Example:</strong></p>
<ul>
<li>You want to build an agent that can summarize any webpage, using two tools: Get Page Contents and Summarize Page. Because the agent must always call Get Page Contents before calling Summarize Page (you can't summarize from nothing!), you should build your agent using a SequentialAgent.</li>
</ul>
<p>As with other workflow agents, the SequentialAgent is not powered by an LLM, and is thus deterministic in how it executes. That being said, workflow agents are concerned only with their execution (i.e. in sequence), and not their internal logic; the tools or sub-agents of a workflow agent may or may not utilize LLMs.</p>
<p><strong>How it works</strong></p>
<p>When the <code>SequentialAgent</code>'s <code>Run Async</code> method is called, it performs the following actions:</p>
<ol>
<li>
<p><strong>Iteration:</strong> It iterates through the sub agents list in the order they were provided.</p>
</li>
<li>
<p><strong>Sub-Agent Execution:</strong> For each sub-agent in the list, it calls the sub-agent's <code>Run Async</code> method.</p>
</li>
</ol>
<p><img alt="alt text" src="../image/adk2.png" /></p>
<p><strong>Full Example: Code Development Pipeline</strong></p>
<p>Consider a simplified code development pipeline:</p>
<ul>
<li>
<p><strong>Code Writer Agent:</strong> An LLM Agent that generates initial code based on a specification.</p>
</li>
<li>
<p><strong>Code Reviewer Agent:</strong> An LLM Agent that reviews the generated code for errors, style issues, and adherence to best practices. It receives the output of the Code Writer Agent.</p>
</li>
<li>
<p><strong>Code Refactorer Agent:</strong> An LLM Agent that takes the reviewed code (and the reviewer's comments) and refactors it to improve quality and address issues.</p>
</li>
</ul>
<p>A <code>SequentialAgent</code> is perfect for this:</p>
<div class="codehilite"><pre><span></span><code>SequentialAgent(sub_agents=[CodeWriterAgent, CodeReviewerAgent, CodeRefactorerAgent])
</code></pre></div>

<p>This ensures the code is written, then reviewed, and finally refactored, in a strict, dependable order. <strong>The output from each sub-agent is passed to the next by storing them in state via</strong> <code>Output Key</code>.</p>
<p><strong>Shared Invocation Context</strong></p>
<p>The <code>SequentialAgent</code> passes the same <code>InvocationContext</code> to each of its sub-agents. This means they all share the same session state, including the temporary (temp:) namespace, making it easy to pass data between steps within a single turn.</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Part of agent.py --&gt; Follow https://google.github.io/adk-docs/get-started/quickstart/ to learn the setup</span>

<span class="c1"># --- 1. Define Sub-Agents for Each Pipeline Stage ---</span>

<span class="c1"># Code Writer Agent</span>
<span class="c1"># Takes the initial specification (from user query) and writes code.</span>
<span class="n">code_writer_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LlmAgent</span><span class="p">(</span>
<span class="w">    </span><span class="k">name</span><span class="o">=</span><span class="s2">&quot;CodeWriterAgent&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">model</span><span class="o">=</span><span class="n">GEMINI_MODEL</span><span class="p">,</span>
<span class="w">    </span><span class="c1"># Change 3: Improved instruction</span>
<span class="w">    </span><span class="n">instruction</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">&quot;&quot;</span><span class="s2">You are a Python Code Generator.</span>
<span class="s2">Based *only* on the user&#39;s request, write Python code that fulfills the requirement.</span>
<span class="s2">Output *only* the complete Python code block, enclosed in triple backticks (```python ... ```). </span>
<span class="s2">Do not add any other text before or after the code block.</span>
<span class="se">&quot;&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="k">description</span><span class="o">=</span><span class="s2">&quot;Writes initial Python code based on a specification.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;generated_code&quot;</span><span class="w"> </span><span class="c1"># Stores output in state[&#39;generated_code&#39;]</span>
<span class="p">)</span>

<span class="c1"># Code Reviewer Agent</span>
<span class="c1"># Takes the code generated by the previous agent (read from state) and provides feedback.</span>
<span class="n">code_reviewer_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LlmAgent</span><span class="p">(</span>
<span class="w">    </span><span class="k">name</span><span class="o">=</span><span class="s2">&quot;CodeReviewerAgent&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">model</span><span class="o">=</span><span class="n">GEMINI_MODEL</span><span class="p">,</span>
<span class="w">    </span><span class="c1"># Change 3: Improved instruction, correctly using state key injection</span>
<span class="w">    </span><span class="n">instruction</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">&quot;&quot;</span><span class="s2">You are an expert Python Code Reviewer. </span>
<span class="s2">    Your task is to provide constructive feedback on the provided code.</span>

<span class="s2">    **Code to Review:**</span>
<span class="s2">    ```python</span>
<span class="s2">    {generated_code}</span>
<span class="s2">    ```</span>

<span class="s2">**Review Criteria:**</span>
<span class="s2">1.  **Correctness:** Does the code work as intended? Are there logic errors?</span>
<span class="s2">2.  **Readability:** Is the code clear and easy to understand? Follows PEP 8 style guidelines?</span>
<span class="s2">3.  **Efficiency:** Is the code reasonably efficient? Any obvious performance bottlenecks?</span>
<span class="s2">4.  **Edge Cases:** Does the code handle potential edge cases or invalid inputs gracefully?</span>
<span class="s2">5.  **Best Practices:** Does the code follow common Python best practices?</span>

<span class="s2">**Output:**</span>
<span class="s2">Provide your feedback as a concise, bulleted list. Focus on the most important points for improvement.</span>
<span class="s2">If the code is excellent and requires no changes, simply state: &quot;</span><span class="k">No</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">issues</span><span class="w"> </span><span class="k">found</span><span class="p">.</span><span class="s2">&quot;</span>
<span class="s2">Output *only* the review comments or the &quot;</span><span class="k">No</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">issues</span><span class="s2">&quot; statement.</span>
<span class="se">&quot;&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="k">description</span><span class="o">=</span><span class="s2">&quot;Reviews code and provides feedback.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;review_comments&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Stores output in state[&#39;review_comments&#39;]</span>
<span class="p">)</span>


<span class="c1"># Code Refactorer Agent</span>
<span class="c1"># Takes the original code and the review comments (read from state) and refactors the code.</span>
<span class="n">code_refactorer_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LlmAgent</span><span class="p">(</span>
<span class="w">    </span><span class="k">name</span><span class="o">=</span><span class="s2">&quot;CodeRefactorerAgent&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">model</span><span class="o">=</span><span class="n">GEMINI_MODEL</span><span class="p">,</span>
<span class="w">    </span><span class="c1"># Change 3: Improved instruction, correctly using state key injection</span>
<span class="w">    </span><span class="n">instruction</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">&quot;&quot;</span><span class="s2">You are a Python Code Refactoring AI.</span>
<span class="s2">Your goal is to improve the given Python code based on the provided review comments.</span>

<span class="s2">  **Original Code:**</span>
<span class="s2">  python</span>
<span class="s2">  {generated_code}</span>


<span class="s2">  **Review Comments:**</span>
<span class="s2">  {review_comments}</span>

<span class="s2">**Task:**</span>
<span class="s2">Carefully apply the suggestions from the review comments to refactor the original code.</span>
<span class="s2">If the review comments state &quot;</span><span class="k">No</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">issues</span><span class="w"> </span><span class="k">found</span><span class="p">,</span><span class="s2">&quot; return the original code unchanged.</span>
<span class="s2">Ensure the final code is complete, functional, and includes necessary imports and docstrings.</span>

<span class="s2">**Output:**</span>
<span class="s2">Output *only* the final, refactored Python code block, enclosed in triple backticks (```python ... ```). </span>
<span class="s2">Do not add any other text before or after the code block.</span>
<span class="se">&quot;&quot;</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="k">description</span><span class="o">=</span><span class="s2">&quot;Refactors code based on review comments.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">output_key</span><span class="o">=</span><span class="s2">&quot;refactored_code&quot;</span><span class="p">,</span><span class="w"> </span><span class="c1"># Stores output in state[&#39;refactored_code&#39;]</span>
<span class="p">)</span>


<span class="c1"># --- 2. Create the SequentialAgent ---</span>
<span class="c1"># This agent orchestrates the pipeline by running the sub_agents in order.</span>
<span class="n">code_pipeline_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SequentialAgent</span><span class="p">(</span>
<span class="w">    </span><span class="k">name</span><span class="o">=</span><span class="s2">&quot;CodePipelineAgent&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">sub_agents</span><span class="o">=</span><span class="err">[</span><span class="n">code_writer_agent</span><span class="p">,</span><span class="w"> </span><span class="n">code_reviewer_agent</span><span class="p">,</span><span class="w"> </span><span class="n">code_refactorer_agent</span><span class="err">]</span><span class="p">,</span>
<span class="w">    </span><span class="k">description</span><span class="o">=</span><span class="s2">&quot;Executes a sequence of code writing, reviewing, and refactoring.&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="c1"># The agents will run in the order provided: Writer -&gt; Reviewer -&gt; Refactorer</span>
<span class="p">)</span>

<span class="c1"># For ADK tools compatibility, the root agent must be named `root_agent`</span>
<span class="n">root_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">code_pipeline_agent</span>
</code></pre></div>

<h1 id="loop-agents">Loop agents<a class="headerlink" href="#loop-agents" title="Permanent link">#</a></h1>
<h3 style="color:blue;">📌 LoopAgent</h3>

<p>The <code>LoopAgent</code> is a workflow agent that executes its sub-agents in a loop (i.e. iteratively). It <strong>repeatedly runs a sequence of agents</strong> for a specified number of iterations or until a termination condition is met.</p>
<p>Use the <code>LoopAgent</code> when your workflow involves repetition or iterative refinement, such as revising code.</p>
<p><strong>Example:</strong></p>
<p>You want to build an agent that can generate images of food, but sometimes when you want to generate a specific number of items (e.g. 5 bananas), it generates a different number of those items in the image (e.g. an image of 7 bananas). You have two tools: <code>Generate Image</code>, <code>Count Food Items</code>. Because you want to keep generating images until it either correctly generates the specified number of items, or after a certain number of iterations, you should build your agent using a LoopAgent.</p>
<p>As with other workflow agents, the LoopAgent is not powered by an LLM, and is thus deterministic in how it executes. That being said, workflow agents are only concerned only with their execution (i.e. in a loop), and not their internal logic; the tools or sub-agents of a workflow agent may or may not utilize LLMs.</p>
<p><strong>How it Works</strong></p>
<p>When the <code>LoopAgent's Run Async</code> method is called, it performs the following actions:</p>
<ol>
<li>
<p><strong>Sub-Agent Execution:</strong> It iterates through the Sub Agents list in order. For each sub-agent, it calls the agent's <code>Run Async</code> method.</p>
</li>
<li>
<p><strong>Termination Check:</strong></p>
</li>
</ol>
<p>Crucially, the LoopAgent itself does not inherently decide when to stop looping. You must implement a termination mechanism to prevent infinite loops. Common strategies include:</p>
<ul>
<li>
<p><strong>Max Iterations:</strong> Set a maximum number of iterations in the <code>LoopAgent</code>. The loop will terminate after that many iterations.</p>
</li>
<li>
<p><strong>Escalation from sub-agent:</strong> Design one or more sub-agents to evaluate a condition (e.g., "Is the document quality good enough?", "Has a consensus been reached?"). If the condition is met, the sub-agent can signal termination (e.g., by raising a custom event, setting a flag in a shared context, or returning a specific value).</p>
</li>
</ul>
<p><img alt="alt text" src="../image/adk3.png" /></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Part of agent.py --&gt; Follow https://google.github.io/adk-docs/get-started/quickstart/ to learn the setup</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">LoopAgent</span><span class="p">,</span> <span class="n">LlmAgent</span><span class="p">,</span> <span class="n">BaseAgent</span><span class="p">,</span> <span class="n">SequentialAgent</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.genai</span><span class="w"> </span><span class="kn">import</span> <span class="n">types</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.runners</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemoryRunner</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.agents.invocation_context</span><span class="w"> </span><span class="kn">import</span> <span class="n">InvocationContext</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.tools.tool_context</span><span class="w"> </span><span class="kn">import</span> <span class="n">ToolContext</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsyncGenerator</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">google.adk.events</span><span class="w"> </span><span class="kn">import</span> <span class="n">Event</span><span class="p">,</span> <span class="n">EventActions</span>

<span class="c1"># --- Constants ---</span>
<span class="n">APP_NAME</span> <span class="o">=</span> <span class="s2">&quot;doc_writing_app_v3&quot;</span> <span class="c1"># New App Name</span>
<span class="n">USER_ID</span> <span class="o">=</span> <span class="s2">&quot;dev_user_01&quot;</span>
<span class="n">SESSION_ID_BASE</span> <span class="o">=</span> <span class="s2">&quot;loop_exit_tool_session&quot;</span> <span class="c1"># New Base Session ID</span>
<span class="n">GEMINI_MODEL</span> <span class="o">=</span> <span class="s2">&quot;gemini-2.0-flash&quot;</span>
<span class="n">STATE_INITIAL_TOPIC</span> <span class="o">=</span> <span class="s2">&quot;initial_topic&quot;</span>

<span class="c1"># --- State Keys ---</span>
<span class="n">STATE_CURRENT_DOC</span> <span class="o">=</span> <span class="s2">&quot;current_document&quot;</span>
<span class="n">STATE_CRITICISM</span> <span class="o">=</span> <span class="s2">&quot;criticism&quot;</span>
<span class="c1"># Define the exact phrase the Critic should use to signal completion</span>
<span class="n">COMPLETION_PHRASE</span> <span class="o">=</span> <span class="s2">&quot;No major issues found.&quot;</span>

<span class="c1"># --- Tool Definition ---</span>
<span class="k">def</span><span class="w"> </span><span class="nf">exit_loop</span><span class="p">(</span><span class="n">tool_context</span><span class="p">:</span> <span class="n">ToolContext</span><span class="p">):</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;Call this function ONLY when the critique indicates no further changes are needed, signaling the iterative process should end.&quot;&quot;&quot;</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  [Tool Call] exit_loop triggered by </span><span class="si">{</span><span class="n">tool_context</span><span class="o">.</span><span class="n">agent_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="n">tool_context</span><span class="o">.</span><span class="n">actions</span><span class="o">.</span><span class="n">escalate</span> <span class="o">=</span> <span class="kc">True</span>
  <span class="c1"># Return empty dict as tools should typically return JSON-serializable output</span>
  <span class="k">return</span> <span class="p">{}</span>

<span class="c1"># --- Agent Definitions ---</span>

<span class="c1"># STEP 1: Initial Writer Agent (Runs ONCE at the beginning)</span>
<span class="n">initial_writer_agent</span> <span class="o">=</span> <span class="n">LlmAgent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;InitialWriterAgent&quot;</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="n">GEMINI_MODEL</span><span class="p">,</span>
    <span class="n">include_contents</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span>
    <span class="c1"># MODIFIED Instruction: Ask for a slightly more developed start</span>
    <span class="n">instruction</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;You are a Creative Writing Assistant tasked with starting a story.</span>
<span class="s2">    Write the *first draft* of a short story (aim for 2-4 sentences).</span>
<span class="s2">    Base the content *only* on the topic provided below. Try to introduce a specific element (like a character, a setting detail, or a starting action) to make it engaging.</span>
<span class="s2">    Topic: </span><span class="se">{{</span><span class="s2">initial_topic</span><span class="se">}}</span>

<span class="s2">    Output *only* the story/document text. Do not add introductions or explanations.</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Writes the initial document draft based on the topic, aiming for some initial substance.&quot;</span><span class="p">,</span>
    <span class="n">output_key</span><span class="o">=</span><span class="n">STATE_CURRENT_DOC</span>
<span class="p">)</span>

<span class="c1"># STEP 2a: Critic Agent (Inside the Refinement Loop)</span>
<span class="n">critic_agent_in_loop</span> <span class="o">=</span> <span class="n">LlmAgent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;CriticAgent&quot;</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="n">GEMINI_MODEL</span><span class="p">,</span>
    <span class="n">include_contents</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span>
    <span class="c1"># MODIFIED Instruction: More nuanced completion criteria, look for clear improvement paths.</span>
    <span class="n">instruction</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;You are a Constructive Critic AI reviewing a short document draft (typically 2-6 sentences). Your goal is balanced feedback.</span>

<span class="s2">    **Document to Review:**</span>
<span class="s2">    ```</span>
<span class="s2">    </span><span class="se">{{</span><span class="s2">current_document</span><span class="se">}}</span>
<span class="s2">    ```</span>

<span class="s2">    **Task:**</span>
<span class="s2">    Review the document for clarity, engagement, and basic coherence according to the initial topic (if known).</span>

<span class="s2">    IF you identify 1-2 *clear and actionable* ways the document could be improved to better capture the topic or enhance reader engagement (e.g., &quot;Needs a stronger opening sentence&quot;, &quot;Clarify the character&#39;s goal&quot;):</span>
<span class="s2">    Provide these specific suggestions concisely. Output *only* the critique text.</span>

<span class="s2">    ELSE IF the document is coherent, addresses the topic adequately for its length, and has no glaring errors or obvious omissions:</span>
<span class="s2">    Respond *exactly* with the phrase &quot;</span><span class="si">{</span><span class="n">COMPLETION_PHRASE</span><span class="si">}</span><span class="s2">&quot; and nothing else. It doesn&#39;t need to be perfect, just functionally complete for this stage. Avoid suggesting purely subjective stylistic preferences if the core is sound.</span>

<span class="s2">    Do not add explanations. Output only the critique OR the exact completion phrase.</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Reviews the current draft, providing critique if clear improvements are needed, otherwise signals completion.&quot;</span><span class="p">,</span>
    <span class="n">output_key</span><span class="o">=</span><span class="n">STATE_CRITICISM</span>
<span class="p">)</span>


<span class="c1"># STEP 2b: Refiner/Exiter Agent (Inside the Refinement Loop)</span>
<span class="n">refiner_agent_in_loop</span> <span class="o">=</span> <span class="n">LlmAgent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;RefinerAgent&quot;</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="n">GEMINI_MODEL</span><span class="p">,</span>
    <span class="c1"># Relies solely on state via placeholders</span>
    <span class="n">include_contents</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">,</span>
    <span class="n">instruction</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;You are a Creative Writing Assistant refining a document based on feedback OR exiting the process.</span>
<span class="s2">    **Current Document:**</span>
<span class="s2">    ```</span>
<span class="s2">    </span><span class="se">{{</span><span class="s2">current_document</span><span class="se">}}</span>
<span class="s2">    ```</span>
<span class="s2">    **Critique/Suggestions:**</span>
<span class="s2">    </span><span class="se">{{</span><span class="s2">criticism</span><span class="se">}}</span>

<span class="s2">    **Task:**</span>
<span class="s2">    Analyze the &#39;Critique/Suggestions&#39;.</span>
<span class="s2">    IF the critique is *exactly* &quot;</span><span class="si">{</span><span class="n">COMPLETION_PHRASE</span><span class="si">}</span><span class="s2">&quot;:</span>
<span class="s2">    You MUST call the &#39;exit_loop&#39; function. Do not output any text.</span>
<span class="s2">    ELSE (the critique contains actionable feedback):</span>
<span class="s2">    Carefully apply the suggestions to improve the &#39;Current Document&#39;. Output *only* the refined document text.</span>

<span class="s2">    Do not add explanations. Either output the refined document OR call the exit_loop function.</span>
<span class="s2">&quot;&quot;&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Refines the document based on critique, or calls exit_loop if critique indicates completion.&quot;</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">exit_loop</span><span class="p">],</span> <span class="c1"># Provide the exit_loop tool</span>
    <span class="n">output_key</span><span class="o">=</span><span class="n">STATE_CURRENT_DOC</span> <span class="c1"># Overwrites state[&#39;current_document&#39;] with the refined version</span>
<span class="p">)</span>


<span class="c1"># STEP 2: Refinement Loop Agent</span>
<span class="n">refinement_loop</span> <span class="o">=</span> <span class="n">LoopAgent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;RefinementLoop&quot;</span><span class="p">,</span>
    <span class="c1"># Agent order is crucial: Critique first, then Refine/Exit</span>
    <span class="n">sub_agents</span><span class="o">=</span><span class="p">[</span>
        <span class="n">critic_agent_in_loop</span><span class="p">,</span>
        <span class="n">refiner_agent_in_loop</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">max_iterations</span><span class="o">=</span><span class="mi">5</span> <span class="c1"># Limit loops</span>
<span class="p">)</span>

<span class="c1"># STEP 3: Overall Sequential Pipeline</span>
<span class="c1"># For ADK tools compatibility, the root agent must be named `root_agent`</span>
<span class="n">root_agent</span> <span class="o">=</span> <span class="n">SequentialAgent</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;IterativeWritingPipeline&quot;</span><span class="p">,</span>
    <span class="n">sub_agents</span><span class="o">=</span><span class="p">[</span>
        <span class="n">initial_writer_agent</span><span class="p">,</span> <span class="c1"># Run first to create initial doc</span>
        <span class="n">refinement_loop</span>       <span class="c1"># Then run the critique/refine loop</span>
    <span class="p">],</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Writes an initial document and then iteratively refines it with critique using an exit tool.&quot;</span>
<span class="p">)</span>
</code></pre></div>

<h1 id="parallel-agents">Parallel agents<a class="headerlink" href="#parallel-agents" title="Permanent link">#</a></h1>
<h3 style="color:blue;">📌 ParallelAgent</h3>

<p>The <code>ParallelAgent</code> is a workflow agent that executes its sub-agents concurrently. This dramatically speeds up workflows where tasks can be performed independently.</p>
<p>Use <code>ParallelAgent</code> when: For scenarios prioritizing speed and involving independent, resource-intensive tasks, a ParallelAgent facilitates efficient parallel execution. <strong>When sub-agents operate without dependencies, their tasks can be performed concurrently</strong>, significantly reducing overall processing time.</p>
<p>As with other workflow agents, the ParallelAgent is not powered by an LLM, and is thus deterministic in how it executes. That being said, workflow agents are only concerned with their execution (i.e. executing sub-agents in parallel), and not their internal logic; the tools or sub-agents of a workflow agent may or may not utilize LLMs.</p>
<p><strong>Example:</strong>
This approach is particularly beneficial for operations like multi-source data retrieval or heavy computations, where parallelization yields substantial performance gains. Importantly, this strategy assumes no inherent need for shared state or direct information exchange between the concurrently executing agents.</p>
<p><strong>How it works</strong></p>
<p>When the <code>ParallelAgent</code>'s <code>run_async()</code> method is called:</p>
<ol>
<li>
<p><strong>Concurrent Execution:</strong> It initiates the <code>run_async()</code> method of each sub-agent present in the sub_agents list concurrently. This means all the agents start running at (approximately) the same time.</p>
</li>
<li>
<p><strong>Independent Branches:</strong> Each sub-agent operates in its own execution branch. There is no automatic sharing of conversation history or state between these branches during execution.</p>
</li>
<li>
<p><strong>Result Collection:</strong> The ParallelAgent manages the parallel execution and, typically, provides a way to access the results from each sub-agent after they have completed (e.g., through a list of results or events). The order of results may not be deterministic.</p>
</li>
</ol>
<p><strong>Independent Execution and State Management</strong></p>
<p>It's crucial to understand that sub-agents within a ParallelAgent run independently. If you need communication or data sharing between these agents, you must implement it explicitly. Possible approaches include:</p>
<ul>
<li>
<p><strong>Shared</strong> <code>InvocationContext</code>: You could pass a shared InvocationContext object to each sub-agent. This object could act as a shared data store. However, you'd need to manage concurrent access to this shared context carefully (e.g., using locks) to avoid race conditions.</p>
</li>
<li>
<p><strong>External State Management:</strong> Use an external database, message queue, or other mechanism to manage shared state and facilitate communication between agents.</p>
</li>
<li>
<p><strong>Post-Processing:</strong> Collect results from each branch, and then implement logic to coordinate data afterwards.</p>
</li>
</ul>
<p><img alt="alt text" src="../image/adk4.png" /></p>
<p><strong>Full Example: Parallel Web Research</strong></p>
<p>Imagine researching multiple topics simultaneously:</p>
<ol>
<li>
<p><strong>Researcher Agent 1:</strong> An LlmAgent that researches "renewable energy sources."</p>
</li>
<li>
<p><strong>Researcher Agent 2:</strong> An LlmAgent that researches "electric vehicle technology."</p>
</li>
<li>
<p><strong>Researcher Agent 3:</strong> An LlmAgent that researches "carbon capture methods."</p>
</li>
</ol>
<div class="codehilite"><pre><span></span><code>ParallelAgent(sub_agents=[ResearcherAgent1, ResearcherAgent2, ResearcherAgent3])
</code></pre></div>

<div class="codehilite"><pre><span></span><code><span class="w"> </span><span class="cp"># Part of agent.py --&gt; Follow https:</span><span class="c1">//google.github.io/adk-docs/get-started/quickstart/ to learn the setup</span>
<span class="w"> </span><span class="cp"># --- 1. Define Researcher Sub-Agents (to run in parallel) ---</span>

<span class="w"> </span><span class="cp"># Researcher 1: Renewable Energy</span>
<span class="w"> </span><span class="n">researcher_agent_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LlmAgent</span><span class="p">(</span>
<span class="w">     </span><span class="n">name</span><span class="o">=</span><span class="s">&quot;RenewableEnergyResearcher&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="n">model</span><span class="o">=</span><span class="n">GEMINI_MODEL</span><span class="p">,</span>
<span class="w">     </span><span class="n">instruction</span><span class="o">=</span><span class="s">&quot;&quot;&quot;You are an AI Research Assistant specializing in energy.</span>
<span class="w"> </span><span class="n">Research</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">latest</span><span class="w"> </span><span class="n">advancements</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">&#39;</span><span class="n">renewable</span><span class="w"> </span><span class="n">energy</span><span class="w"> </span><span class="n">sources</span><span class="err">&#39;</span><span class="p">.</span>
<span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Google</span><span class="w"> </span><span class="n">Search</span><span class="w"> </span><span class="n">tool</span><span class="w"> </span><span class="n">provided</span><span class="p">.</span>
<span class="w"> </span><span class="n">Summarize</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">findings</span><span class="w"> </span><span class="n">concisely</span><span class="w"> </span><span class="p">(</span><span class="mi">1-2</span><span class="w"> </span><span class="n">sentences</span><span class="p">).</span>
<span class="w"> </span><span class="n">Output</span><span class="w"> </span><span class="o">*</span><span class="n">only</span><span class="o">*</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">summary</span><span class="p">.</span>
<span class="w"> </span><span class="s">&quot;&quot;&quot;,</span>
<span class="w">     </span><span class="n">description</span><span class="o">=</span><span class="s">&quot;Researches renewable energy sources.&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">google_search</span><span class="p">],</span>
<span class="w">     </span><span class="cp"># Store result in state for the merger agent</span>
<span class="w">     </span><span class="n">output_key</span><span class="o">=</span><span class="s">&quot;renewable_energy_result&quot;</span>
<span class="w"> </span><span class="p">)</span>

<span class="w"> </span><span class="cp"># Researcher 2: Electric Vehicles</span>
<span class="w"> </span><span class="n">researcher_agent_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LlmAgent</span><span class="p">(</span>
<span class="w">     </span><span class="n">name</span><span class="o">=</span><span class="s">&quot;EVResearcher&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="n">model</span><span class="o">=</span><span class="n">GEMINI_MODEL</span><span class="p">,</span>
<span class="w">     </span><span class="n">instruction</span><span class="o">=</span><span class="s">&quot;&quot;&quot;You are an AI Research Assistant specializing in transportation.</span>
<span class="w"> </span><span class="n">Research</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">latest</span><span class="w"> </span><span class="n">developments</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">&#39;</span><span class="n">electric</span><span class="w"> </span><span class="n">vehicle</span><span class="w"> </span><span class="n">technology</span><span class="err">&#39;</span><span class="p">.</span>
<span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Google</span><span class="w"> </span><span class="n">Search</span><span class="w"> </span><span class="n">tool</span><span class="w"> </span><span class="n">provided</span><span class="p">.</span>
<span class="w"> </span><span class="n">Summarize</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">findings</span><span class="w"> </span><span class="n">concisely</span><span class="w"> </span><span class="p">(</span><span class="mi">1-2</span><span class="w"> </span><span class="n">sentences</span><span class="p">).</span>
<span class="w"> </span><span class="n">Output</span><span class="w"> </span><span class="o">*</span><span class="n">only</span><span class="o">*</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">summary</span><span class="p">.</span>
<span class="w"> </span><span class="s">&quot;&quot;&quot;,</span>
<span class="w">     </span><span class="n">description</span><span class="o">=</span><span class="s">&quot;Researches electric vehicle technology.&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">google_search</span><span class="p">],</span>
<span class="w">     </span><span class="cp"># Store result in state for the merger agent</span>
<span class="w">     </span><span class="n">output_key</span><span class="o">=</span><span class="s">&quot;ev_technology_result&quot;</span>
<span class="w"> </span><span class="p">)</span>

<span class="w"> </span><span class="cp"># Researcher 3: Carbon Capture</span>
<span class="w"> </span><span class="n">researcher_agent_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LlmAgent</span><span class="p">(</span>
<span class="w">     </span><span class="n">name</span><span class="o">=</span><span class="s">&quot;CarbonCaptureResearcher&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="n">model</span><span class="o">=</span><span class="n">GEMINI_MODEL</span><span class="p">,</span>
<span class="w">     </span><span class="n">instruction</span><span class="o">=</span><span class="s">&quot;&quot;&quot;You are an AI Research Assistant specializing in climate solutions.</span>
<span class="w"> </span><span class="n">Research</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">&#39;</span><span class="n">carbon</span><span class="w"> </span><span class="n">capture</span><span class="w"> </span><span class="n">methods</span><span class="err">&#39;</span><span class="p">.</span>
<span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Google</span><span class="w"> </span><span class="n">Search</span><span class="w"> </span><span class="n">tool</span><span class="w"> </span><span class="n">provided</span><span class="p">.</span>
<span class="w"> </span><span class="n">Summarize</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">findings</span><span class="w"> </span><span class="n">concisely</span><span class="w"> </span><span class="p">(</span><span class="mi">1-2</span><span class="w"> </span><span class="n">sentences</span><span class="p">).</span>
<span class="w"> </span><span class="n">Output</span><span class="w"> </span><span class="o">*</span><span class="n">only</span><span class="o">*</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">summary</span><span class="p">.</span>
<span class="w"> </span><span class="s">&quot;&quot;&quot;,</span>
<span class="w">     </span><span class="n">description</span><span class="o">=</span><span class="s">&quot;Researches carbon capture methods.&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">google_search</span><span class="p">],</span>
<span class="w">     </span><span class="cp"># Store result in state for the merger agent</span>
<span class="w">     </span><span class="n">output_key</span><span class="o">=</span><span class="s">&quot;carbon_capture_result&quot;</span>
<span class="w"> </span><span class="p">)</span>

<span class="w"> </span><span class="cp"># --- 2. Create the ParallelAgent (Runs researchers concurrently) ---</span>
<span class="w"> </span><span class="cp"># This agent orchestrates the concurrent execution of the researchers.</span>
<span class="w"> </span><span class="cp"># It finishes once all researchers have completed and stored their results in state.</span>
<span class="w"> </span><span class="n">parallel_research_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ParallelAgent</span><span class="p">(</span>
<span class="w">     </span><span class="n">name</span><span class="o">=</span><span class="s">&quot;ParallelWebResearchAgent&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="n">sub_agents</span><span class="o">=</span><span class="p">[</span><span class="n">researcher_agent_1</span><span class="p">,</span><span class="w"> </span><span class="n">researcher_agent_2</span><span class="p">,</span><span class="w"> </span><span class="n">researcher_agent_3</span><span class="p">],</span>
<span class="w">     </span><span class="n">description</span><span class="o">=</span><span class="s">&quot;Runs multiple research agents in parallel to gather information.&quot;</span>
<span class="w"> </span><span class="p">)</span>

<span class="w"> </span><span class="cp"># --- 3. Define the Merger Agent (Runs *after* the parallel agents) ---</span>
<span class="w"> </span><span class="cp"># This agent takes the results stored in the session state by the parallel agents</span>
<span class="w"> </span><span class="cp"># and synthesizes them into a single, structured response with attributions.</span>
<span class="w"> </span><span class="n">merger_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LlmAgent</span><span class="p">(</span>
<span class="w">     </span><span class="n">name</span><span class="o">=</span><span class="s">&quot;SynthesisAgent&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="n">model</span><span class="o">=</span><span class="n">GEMINI_MODEL</span><span class="p">,</span><span class="w">  </span><span class="err">#</span><span class="w"> </span><span class="n">Or</span><span class="w"> </span><span class="n">potentially</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">powerful</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">needed</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">synthesis</span>
<span class="w">     </span><span class="n">instruction</span><span class="o">=</span><span class="s">&quot;&quot;&quot;You are an AI Assistant responsible for combining research findings into a structured report.</span>

<span class="w"> </span><span class="n">Your</span><span class="w"> </span><span class="n">primary</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">synthesize</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">research</span><span class="w"> </span><span class="n">summaries</span><span class="p">,</span><span class="w"> </span><span class="n">clearly</span><span class="w"> </span><span class="n">attributing</span><span class="w"> </span><span class="n">findings</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="n">areas</span><span class="p">.</span><span class="w"> </span><span class="n">Structure</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">headings</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">each</span><span class="w"> </span><span class="n">topic</span><span class="p">.</span><span class="w"> </span><span class="n">Ensure</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">coherent</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">integrates</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="n">points</span><span class="w"> </span><span class="n">smoothly</span><span class="p">.</span>

<span class="w"> </span><span class="o">**</span><span class="n">Crucially</span><span class="o">:</span><span class="w"> </span><span class="n">Your</span><span class="w"> </span><span class="n">entire</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">MUST</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">grounded</span><span class="w"> </span><span class="o">*</span><span class="n">exclusively</span><span class="o">*</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">&#39;</span><span class="n">Input</span><span class="w"> </span><span class="n">Summaries</span><span class="err">&#39;</span><span class="w"> </span><span class="n">below</span><span class="p">.</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">NOT</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">external</span><span class="w"> </span><span class="n">knowledge</span><span class="p">,</span><span class="w"> </span><span class="n">facts</span><span class="p">,</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">present</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">summaries</span><span class="p">.</span><span class="o">**</span>

<span class="w"> </span><span class="o">**</span><span class="n">Input</span><span class="w"> </span><span class="n">Summaries</span><span class="o">:**</span>

<span class="w"> </span><span class="o">*</span><span class="w">   </span><span class="o">**</span><span class="n">Renewable</span><span class="w"> </span><span class="n">Energy</span><span class="o">:**</span>
<span class="w">     </span><span class="p">{</span><span class="n">renewable_energy_result</span><span class="p">}</span>

<span class="w"> </span><span class="o">*</span><span class="w">   </span><span class="o">**</span><span class="n">Electric</span><span class="w"> </span><span class="n">Vehicles</span><span class="o">:**</span>
<span class="w">     </span><span class="p">{</span><span class="n">ev_technology_result</span><span class="p">}</span>

<span class="w"> </span><span class="o">*</span><span class="w">   </span><span class="o">**</span><span class="n">Carbon</span><span class="w"> </span><span class="n">Capture</span><span class="o">:**</span>
<span class="w">     </span><span class="p">{</span><span class="n">carbon_capture_result</span><span class="p">}</span>

<span class="w"> </span><span class="o">**</span><span class="n">Output</span><span class="w"> </span><span class="n">Format</span><span class="o">:**</span>

<span class="w"> </span><span class="cp">## Summary of Recent Sustainable Technology Advancements</span>

<span class="w"> </span><span class="cp">### Renewable Energy Findings</span>
<span class="w"> </span><span class="p">(</span><span class="n">Based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">RenewableEnergyResearcher</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">findings</span><span class="p">)</span>
<span class="w"> </span><span class="p">[</span><span class="n">Synthesize</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">elaborate</span><span class="w"> </span><span class="o">*</span><span class="n">only</span><span class="o">*</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">renewable</span><span class="w"> </span><span class="n">energy</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">above</span><span class="p">.]</span>

<span class="w"> </span><span class="cp">### Electric Vehicle Findings</span>
<span class="w"> </span><span class="p">(</span><span class="n">Based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">EVResearcher</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">findings</span><span class="p">)</span>
<span class="w"> </span><span class="p">[</span><span class="n">Synthesize</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">elaborate</span><span class="w"> </span><span class="o">*</span><span class="n">only</span><span class="o">*</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">EV</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">above</span><span class="p">.]</span>

<span class="w"> </span><span class="cp">### Carbon Capture Findings</span>
<span class="w"> </span><span class="p">(</span><span class="n">Based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">CarbonCaptureResearcher</span><span class="err">&#39;</span><span class="n">s</span><span class="w"> </span><span class="n">findings</span><span class="p">)</span>
<span class="w"> </span><span class="p">[</span><span class="n">Synthesize</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">elaborate</span><span class="w"> </span><span class="o">*</span><span class="n">only</span><span class="o">*</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">carbon</span><span class="w"> </span><span class="n">capture</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">above</span><span class="p">.]</span>

<span class="w"> </span><span class="cp">### Overall Conclusion</span>
<span class="w"> </span><span class="p">[</span><span class="n">Provide</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">brief</span><span class="w"> </span><span class="p">(</span><span class="mi">1-2</span><span class="w"> </span><span class="n">sentence</span><span class="p">)</span><span class="w"> </span><span class="n">concluding</span><span class="w"> </span><span class="n">statement</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">connects</span><span class="w"> </span><span class="o">*</span><span class="n">only</span><span class="o">*</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">findings</span><span class="w"> </span><span class="n">presented</span><span class="w"> </span><span class="n">above</span><span class="p">.]</span>

<span class="w"> </span><span class="n">Output</span><span class="w"> </span><span class="o">*</span><span class="n">only</span><span class="o">*</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">structured</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">format</span><span class="p">.</span><span class="w"> </span><span class="n">Do</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">include</span><span class="w"> </span><span class="n">introductory</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">concluding</span><span class="w"> </span><span class="n">phrases</span><span class="w"> </span><span class="n">outside</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">structure</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">strictly</span><span class="w"> </span><span class="n">adhere</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">provided</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="n">content</span><span class="p">.</span>
<span class="w"> </span><span class="s">&quot;&quot;&quot;,</span>
<span class="w">     </span><span class="n">description</span><span class="o">=</span><span class="s">&quot;Combines research findings from parallel agents into a structured, cited report, strictly grounded on provided inputs.&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="cp"># No tools needed for merging</span>
<span class="w">     </span><span class="cp"># No output_key needed here, as its direct response is the final output of the sequence</span>
<span class="w"> </span><span class="p">)</span>


<span class="w"> </span><span class="cp"># --- 4. Create the SequentialAgent (Orchestrates the overall flow) ---</span>
<span class="w"> </span><span class="cp"># This is the main agent that will be run. It first executes the ParallelAgent</span>
<span class="w"> </span><span class="cp"># to populate the state, and then executes the MergerAgent to produce the final output.</span>
<span class="w"> </span><span class="n">sequential_pipeline_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SequentialAgent</span><span class="p">(</span>
<span class="w">     </span><span class="n">name</span><span class="o">=</span><span class="s">&quot;ResearchAndSynthesisPipeline&quot;</span><span class="p">,</span>
<span class="w">     </span><span class="cp"># Run parallel research first, then merge</span>
<span class="w">     </span><span class="n">sub_agents</span><span class="o">=</span><span class="p">[</span><span class="n">parallel_research_agent</span><span class="p">,</span><span class="w"> </span><span class="n">merger_agent</span><span class="p">],</span>
<span class="w">     </span><span class="n">description</span><span class="o">=</span><span class="s">&quot;Coordinates parallel research and synthesizes the results.&quot;</span>
<span class="w"> </span><span class="p">)</span>

<span class="w"> </span><span class="n">root_agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sequential_pipeline_agent</span>
<span class="w"> </span><span class="err">```</span>

<span class="w"> </span><span class="cp"># Custom agents</span>

<span class="w"> </span><span class="o">&lt;</span><span class="n">h3</span><span class="w"> </span><span class="n">style</span><span class="o">=</span><span class="s">&quot;color:blue;&quot;</span><span class="o">&gt;</span><span class="err">📌</span><span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="n">agents</span><span class="o">&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>

<span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="n">agents</span><span class="w"> </span><span class="n">provide</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ultimate</span><span class="w"> </span><span class="n">flexibility</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">ADK</span><span class="p">,</span><span class="w"> </span><span class="n">allowing</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="o">**</span><span class="n">arbitrary</span><span class="w"> </span><span class="n">orchestration</span><span class="w"> </span><span class="n">logic</span><span class="o">**</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">inheriting</span><span class="w"> </span><span class="n">directly</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="err">```</span><span class="n">BaseAgent</span><span class="err">```</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">implementing</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">flow</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">goes</span><span class="w"> </span><span class="n">beyond</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">predefined</span><span class="w"> </span><span class="n">patterns</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">```</span><span class="n">SequentialAgent</span><span class="err">```</span><span class="p">,</span><span class="w"> </span><span class="err">```</span><span class="n">LoopAgent</span><span class="err">```</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="err">```</span><span class="n">ParallelAgent</span><span class="err">```</span><span class="p">,</span><span class="w"> </span><span class="n">enabling</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">highly</span><span class="w"> </span><span class="n">specific</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="k">complex</span><span class="w"> </span><span class="n">agentic</span><span class="w"> </span><span class="n">workflows</span><span class="p">.</span>


<span class="o">&lt;</span><span class="n">h3</span><span class="w"> </span><span class="n">style</span><span class="o">=</span><span class="s">&quot;color:blue;&quot;</span><span class="o">&gt;</span><span class="err">📌</span><span class="w"> </span><span class="n">What</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="n">Agent</span><span class="o">?&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>

<span class="n">A</span><span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="n">Agent</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">essentially</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">inherits</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="err">```</span><span class="n">google</span><span class="p">.</span><span class="n">adk</span><span class="p">.</span><span class="n">agents</span><span class="p">.</span><span class="n">BaseAgent</span><span class="err">```</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">implements</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">core</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">logic</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">```</span><span class="n">_run_async_impl</span><span class="err">```</span><span class="w"> </span><span class="n">asynchronous</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">complete</span><span class="w"> </span><span class="n">control</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="n">how</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">calls</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">agents</span><span class="w"> </span><span class="p">(</span><span class="n">sub</span><span class="o">-</span><span class="n">agents</span><span class="p">),</span><span class="w"> </span><span class="n">manages</span><span class="w"> </span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">handles</span><span class="w"> </span><span class="n">events</span><span class="p">.</span>

<span class="o">&lt;</span><span class="n">h3</span><span class="w"> </span><span class="n">style</span><span class="o">=</span><span class="s">&quot;color:blue;&quot;</span><span class="o">&gt;</span><span class="err">📌</span><span class="w"> </span><span class="n">Why</span><span class="w"> </span><span class="n">Use</span><span class="w"> </span><span class="n">Them</span><span class="o">?&lt;/</span><span class="n">h3</span><span class="o">&gt;</span>

<span class="n">While</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">Workflow</span><span class="w"> </span><span class="n">Agents</span><span class="w"> </span><span class="err">```</span><span class="p">(</span><span class="n">SequentialAgent</span><span class="p">,</span><span class="w"> </span><span class="n">LoopAgent</span><span class="p">,</span><span class="w"> </span><span class="n">ParallelAgent</span><span class="p">)</span><span class="err">```</span><span class="w"> </span><span class="n">cover</span><span class="w"> </span><span class="n">common</span><span class="w"> </span><span class="n">orchestration</span><span class="w"> </span><span class="n">patterns</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="err">&#39;</span><span class="n">ll</span><span class="w"> </span><span class="n">need</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">requirements</span><span class="w"> </span><span class="n">include</span><span class="o">:</span>

<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Conditional</span><span class="w"> </span><span class="n">Logic</span><span class="o">:**</span><span class="w"> </span><span class="n">Executing</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">sub</span><span class="o">-</span><span class="n">agents</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">taking</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="n">conditions</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">steps</span><span class="p">.</span>

<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Complex</span><span class="w"> </span><span class="n">State</span><span class="w"> </span><span class="n">Management</span><span class="o">:**</span><span class="w"> </span><span class="n">Implementing</span><span class="w"> </span><span class="n">intricate</span><span class="w"> </span><span class="n">logic</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">maintaining</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">updating</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">throughout</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">workflow</span><span class="w"> </span><span class="n">beyond</span><span class="w"> </span><span class="n">simple</span><span class="w"> </span><span class="n">sequential</span><span class="w"> </span><span class="n">passing</span><span class="p">.</span>

<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">External</span><span class="w"> </span><span class="n">Integrations</span><span class="o">:**</span><span class="w"> </span><span class="n">Incorporating</span><span class="w"> </span><span class="n">calls</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">external</span><span class="w"> </span><span class="n">APIs</span><span class="p">,</span><span class="w"> </span><span class="n">databases</span><span class="p">,</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">libraries</span><span class="w"> </span><span class="n">directly</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">orchestration</span><span class="w"> </span><span class="n">flow</span><span class="w"> </span><span class="n">control</span><span class="p">.</span>

<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Dynamic</span><span class="w"> </span><span class="n">Agent</span><span class="w"> </span><span class="n">Selection</span><span class="o">:**</span><span class="w"> </span><span class="n">Choosing</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">sub</span><span class="o">-</span><span class="n">agent</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">based</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">dynamic</span><span class="w"> </span><span class="n">evaluation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">situation</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">input</span><span class="p">.</span>

<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Unique</span><span class="w"> </span><span class="n">Workflow</span><span class="w"> </span><span class="n">Patterns</span><span class="o">:**</span><span class="w"> </span><span class="n">Implementing</span><span class="w"> </span><span class="n">orchestration</span><span class="w"> </span><span class="n">logic</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">doesn</span><span class="err">&#39;</span><span class="n">t</span><span class="w"> </span><span class="n">fit</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">standard</span><span class="w"> </span><span class="n">sequential</span><span class="p">,</span><span class="w"> </span><span class="n">parallel</span><span class="p">,</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">loop</span><span class="w"> </span><span class="n">structures</span><span class="p">.</span>


<span class="o">!</span><span class="p">[</span><span class="n">alt</span><span class="w"> </span><span class="n">text</span><span class="p">](..</span><span class="o">/</span><span class="n">image</span><span class="o">/</span><span class="n">adk5</span><span class="p">.</span><span class="n">png</span><span class="p">)</span>

<span class="o">**</span><span class="n">Implementing</span><span class="w"> </span><span class="n">Custom</span><span class="w"> </span><span class="n">Logic</span><span class="o">:**</span>

<span class="n">The</span><span class="w"> </span><span class="n">core</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">asynchronous</span><span class="w"> </span><span class="n">behavior</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">orchestrate</span><span class="w"> </span><span class="n">sub</span><span class="o">-</span><span class="n">agents</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">manage</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">flow</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">execution</span><span class="p">.</span>

<span class="n">The</span><span class="w"> </span><span class="n">heart</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">agent</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">```</span><span class="n">_run_async_impl</span><span class="err">```</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">unique</span><span class="w"> </span><span class="n">behavior</span><span class="p">.</span>

<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Signature</span><span class="o">:**</span><span class="w"> </span><span class="err">```</span><span class="n">async</span><span class="w"> </span><span class="n">def</span><span class="w"> </span><span class="n">_run_async_impl</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span><span class="w"> </span><span class="n">ctx</span><span class="o">:</span><span class="w"> </span><span class="n">InvocationContext</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">AsyncGenerator</span><span class="p">[</span><span class="n">Event</span><span class="p">,</span><span class="w"> </span><span class="n">None</span><span class="p">]</span><span class="o">:</span><span class="err">```</span>

<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">Asynchronous</span><span class="w"> </span><span class="n">Generator</span><span class="o">:**</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="err">```</span><span class="n">async</span><span class="w"> </span><span class="n">def</span><span class="err">```</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="err">```</span><span class="n">AsyncGenerator</span><span class="err">```</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">allows</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">yield</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="n">produced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">sub</span><span class="o">-</span><span class="n">agents</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">logic</span><span class="w"> </span><span class="n">back</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">runner</span><span class="p">.</span>


<span class="o">-</span><span class="w"> </span><span class="o">**</span><span class="n">ctx</span><span class="o">**</span><span class="w"> </span><span class="err">```</span><span class="p">(</span><span class="n">InvocationContext</span><span class="p">)</span><span class="err">```</span><span class="o">:</span><span class="w"> </span><span class="n">Provides</span><span class="w"> </span><span class="n">access</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">crucial</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="n">information</span><span class="p">,</span><span class="w"> </span><span class="n">most</span><span class="w"> </span><span class="n">importantly</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">session</span><span class="p">.</span><span class="n">state</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">primary</span><span class="w"> </span><span class="n">way</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">share</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">steps</span><span class="w"> </span><span class="n">orchestrated</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">agent</span><span class="p">.</span>

<span class="o">**</span><span class="n">Key</span><span class="w"> </span><span class="n">Capabilities</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Core</span><span class="w"> </span><span class="n">Asynchronous</span><span class="w"> </span><span class="n">Method</span><span class="o">:**</span>

<span class="mf">1.</span><span class="w"> </span><span class="o">**</span><span class="n">Calling</span><span class="w"> </span><span class="n">Sub</span><span class="o">-</span><span class="n">Agents</span><span class="o">:**</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">invoke</span><span class="w"> </span><span class="n">sub</span><span class="o">-</span><span class="n">agents</span><span class="w"> </span><span class="p">(</span><span class="n">which</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">typically</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="n">as</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="n">attributes</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="err">```</span><span class="nb">self</span><span class="p">.</span><span class="n">my_llm_agent</span><span class="err">```</span><span class="p">)</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="err">```</span><span class="n">run_async</span><span class="err">```</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">yield</span><span class="w"> </span><span class="n">their</span><span class="w"> </span><span class="n">events</span><span class="o">:</span>
</code></pre></div>

<p>async for event in self.some_sub_agent.run_async(ctx):
    # Optionally inspect or log the event
    yield event # Pass the event up</p>
<div class="codehilite"><pre><span></span><code><span class="mf">2.</span><span class="w"> </span><span class="o">**</span><span class="n">Managing</span><span class="w"> </span><span class="n">State</span><span class="p">:</span><span class="o">**</span><span class="w"> </span><span class="kr">Read</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">dictionary</span><span class="w"> </span><span class="p">(</span><span class="err">```</span><span class="n">ctx</span><span class="mf">.</span><span class="n">session</span><span class="mf">.</span><span class="n">state</span><span class="err">```</span><span class="p">)</span><span class="w"> </span><span class="kr">to</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="kd">data</span><span class="w"> </span><span class="n">between</span><span class="w"> </span><span class="n">sub</span><span class="o">-</span><span class="n">agent</span><span class="w"> </span><span class="n">calls</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">decisions</span><span class="p">:</span>
</code></pre></div>

<h1 id="read-data-set-by-a-previous-agent">Read data set by a previous agent<a class="headerlink" href="#read-data-set-by-a-previous-agent" title="Permanent link">#</a></h1>
<p>previous_result = ctx.session.state.get("some_key")</p>
<h1 id="make-a-decision-based-on-state">Make a decision based on state<a class="headerlink" href="#make-a-decision-based-on-state" title="Permanent link">#</a></h1>
<p>if previous_result == "some_value":
    # ... call a specific sub-agent ...
else:
    # ... call another sub-agent ...</p>
<h1 id="store-a-result-for-a-later-step-often-done-via-a-sub-agents-output_key">Store a result for a later step (often done via a sub-agent's output_key)<a class="headerlink" href="#store-a-result-for-a-later-step-often-done-via-a-sub-agents-output_key" title="Permanent link">#</a></h1>
<h1 id="ctxsessionstatemy_custom_result-calculated_value">ctx.session.state["my_custom_result"] = "calculated_value"<a class="headerlink" href="#ctxsessionstatemy_custom_result-calculated_value" title="Permanent link">#</a></h1>
<p>```</p>
<ol>
<li><strong>Implementing Control Flow:</strong> Use standard Python constructs <code>(if/elif/else, for/while loops, try/except)</code> to create sophisticated, conditional, or iterative workflows involving your sub-agents.</li>
</ol>
<h3 style="color:blue;">📌 Managing Sub-Agents and State</h3>

<p>Typically, a custom agent orchestrates other agents (<code>like LlmAgent, LoopAgent, etc.</code>).</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="adk.html" class="btn btn-neutral float-left" title="ADK"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="Tools.html" class="btn btn-neutral float-right" title="Tools">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="adk.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="Tools.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
